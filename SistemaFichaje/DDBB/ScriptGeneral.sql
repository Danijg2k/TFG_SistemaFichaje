-- CON EJECUTAR ESTE SCRIPT PREPARAREMOS TODO LO NECESARIO

-- CREAR DDBB

CREATE DATABASE Fichaje;

USE Fichaje;

-- CREAR TABLA EMPLEADO

CREATE TABLE Empleado(
Id INTEGER IDENTITY(1,1),
Nombre VARCHAR(200),
Edad INTEGER,
Direccion VARCHAR(150),
Puesto VARCHAR(50),
Dni VARCHAR(9) UNIQUE,
Correo VARCHAR(100) UNIQUE,
HashPassword VARCHAR(MAX),
Rol BIT,
CONSTRAINT Pk_Empleado PRIMARY KEY(Id)
);

-- CREAR TABLA SESION

CREATE TABLE Sesion(
Id INTEGER IDENTITY(1,1),
IdEmpleado INTEGER,
Fecha DATETIME,
CONSTRAINT Pk_Sesion PRIMARY KEY(Id),
CONSTRAINT Fk_Empleado_Sesion FOREIGN KEY (IdEmpleado) REFERENCES Empleado(Id) ON UPDATE CASCADE ON DELETE CASCADE
);


-- INSERTAR EN TABLA EMPLEADO

INSERT INTO Empleado VALUES('Daniel Jiménez Gutiérrez',21,'Calle Roma','Programador Java','11222333A','djimenezg@gmail.com','986c78be53210aeae4ae9a1bf4c0a26e44f7d0af24e2f4cee7d6289064650738',1);
INSERT INTO Empleado VALUES('Mario Ezquerro Castillo',31,'Calle Velázquez','QA Tester','55222443F','mezquerroc@gmail.com','93dbf6365e4f609a767e1a0d7e9de3b3e31deece8ffd2d282a149dd089ffeb05',0);
INSERT INTO Empleado VALUES('Carmen López Santos',25,'Avenida Paraíso','Full Stack Developer','88555444A','clopezs@gmail.com','86aa93a27ae3ed03c0f7a0cc60f2ad635bf1547c8cc4843fafed121f82b13395',0);
INSERT INTO Empleado VALUES('Isabel Navarro Gómez',19,'Avenida Madrid','Back End Developer','77444222A','inavarrog@gmail.com','47e209f5fa94e1144e68f954397a567af9cd7218e55d0b08e02b970a90fba007',0);
INSERT INTO Empleado VALUES('Jorge Álvarez Gil',20,'Calle Picasso','Ingeniero DevOps','22333111A','jalvarezg@gmail.com','2ffbdd3d6745887df8c2b4115b5c9aec9e90391285fe369069306b8036c78a33',0);

-- INSERTAR EN TABLA SESION

INSERT INTO Sesion VALUES(1, DATEADD(hour,2,GETDATE()));
INSERT INTO Sesion VALUES(1, DATEADD(hour,2,GETDATE()));
INSERT INTO Sesion VALUES(2, DATEADD(hour,2,GETDATE()));
INSERT INTO Sesion VALUES(2, DATEADD(hour,2,GETDATE()));
INSERT INTO Sesion VALUES(2, DATEADD(hour,2,GETDATE()));
INSERT INTO Sesion VALUES(3, DATEADD(hour,2,GETDATE()));
INSERT INTO Sesion VALUES(4, DATEADD(hour,2,GETDATE()));
INSERT INTO Sesion VALUES(4, DATEADD(hour,2,GETDATE()));
INSERT INTO Sesion VALUES(5, DATEADD(hour,2,GETDATE()));
INSERT INTO Sesion VALUES(5, DATEADD(hour,2,GETDATE()));
